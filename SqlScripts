CREATE TABLE users (
id INT AUTO_INCREMENT PRIMARY KEY, 
email VARCHAR(255) NOT NULL UNIQUE,
username VARCHAR(255) NOT NULL,
role VARCHAR(255) NOT NULL,
password VARCHAR(255) NOT NULL,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP 
);

CREATE TABLE country_info (
  id INT AUTO_INCREMENT PRIMARY KEY,
  code VARCHAR(10) NOT NULL,          -- ISO country code (e.g., US, IN)
  name VARCHAR(100) NOT NULL,          -- Country name (e.g., United States)
  language VARCHAR(100),               -- Main language (e.g., English)
  phoneCode VARCHAR(10),               -- Phone dialing code (e.g., +1)
  addressAdditionalFields TEXT,        -- Additional address information (optional)
  bankAccAdditionalFields TEXT,        -- Additional bank account information (optional)
  isactive BOOLEAN DEFAULT 1,          -- Active status (1 for active, 0 for inactive)
  updated_by INT,                      -- ID of the user who last updated the record
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- Timestamp of last update
);

CREATE TABLE state_info (
  id INT AUTO_INCREMENT PRIMARY KEY,       -- State ID
  countryId INT NOT NULL,                 -- Country ID (foreign key to country_info table)
  stateName VARCHAR(100) NOT NULL,         -- State name (e.g., "California")
  stateCode VARCHAR(50) NOT NULL,          -- Unique State Code (e.g., "CA")
  gstCode VARCHAR(20),                    -- GST Code (if applicable)
  isactive BOOLEAN DEFAULT 1,              -- Active status (1 for active, 0 for inactive)
  updated_by INT,                          -- User who last updated the record
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- Timestamp of last update
);

CREATE TABLE region_info (
  id INT AUTO_INCREMENT PRIMARY KEY,         -- Unique identifier for the region
  countryId INT NOT NULL,                    -- ID of the country the region belongs to
  regionName VARCHAR(255) NOT NULL,           -- Name of the region
  regionCode VARCHAR(50),                    -- Code for the region (optional)
  stateIds VARCHAR(255),                     -- Comma-separated list of state IDs
  isactive BOOLEAN DEFAULT TRUE,             -- Whether the region is active or not (1 = active, 0 = inactive)
  updated_by INT,                            -- ID of the user who last updated the region
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP -- Timestamp for when the region was last updated
);

CREATE TABLE company_info (
  id INT AUTO_INCREMENT PRIMARY KEY,
  companyName VARCHAR(255) NOT NULL,
  Website VARCHAR(255),
  CINNO VARCHAR(255),
  IECode VARCHAR(255),
  Email VARCHAR(255),
  independent TINYINT(1) DEFAULT 0,  -- 0 = Independent, 1 = Subsidiary
  parentCompanyId INT DEFAULT NULL, -- References the parent company if any
  logopath VARCHAR(255),
  digitalSignPath VARCHAR(255),  -- Optional field for the digital sign or image
  description TEXT,
  isactive TINYINT(1) DEFAULT 1,  -- 1 = Active, 0 = Inactive
  updated_by INT NOT NULL,  -- Assuming this will store the user id of the person who updated the record
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE address_info (
  id INT AUTO_INCREMENT PRIMARY KEY,
  companyId INT NOT NULL,
  countryId INT NOT NULL,
  stateId INT,
  addressLine1 VARCHAR(255),
  addressLine2 VARCHAR(255),
  addressLine3 VARCHAR(255),
  additional_address_details TEXT, -- Extra details for address based on country
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (companyId) REFERENCES company_info(id) ON DELETE CASCADE,
  FOREIGN KEY (countryId) REFERENCES country_info(id) ON DELETE CASCADE,
  FOREIGN KEY (stateId) REFERENCES state_info(id) ON DELETE SET NULL
);
